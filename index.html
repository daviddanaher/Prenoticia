<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Barra Flotante Unificada</title>
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
    }

    .floating-bar {
      position: fixed;
      top: 50px;
      left: 0;
      width: 100%;
      background: #f68e03;
      border-radius: 0 0 8px 8px;
      opacity: 0;
      pointer-events: none;
      transform: translateY(-10px);
      transition: opacity 0.4s ease, transform 0.4s ease;
      z-index: 10000;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .floating-bar.visible {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    .content-wrapper {
      max-width: 1100px;
      width: 100%;
      padding: 10px 20px;
      display: flex;
      align-items: center;
    }

    .login-button,
    .subscribe-button,
    .info-button,
    .my-account-button,
    .logout-button {
      height: 36px;
      line-height: 36px;
      font-size: 14px;
      border-radius: 20px;
      padding: 0 16px;
      margin: 0 6px;
      cursor: pointer;
      border: none;
      display: flex;
      align-items: center;
      white-space: nowrap;
    }

    .subscribe-button {
      background: gold;
      color: #222;
      margin-left: auto;
    }

    .subscribe-button::before {
      content: '‚≠ê';
      margin-right: 6px;
    }

    .info-button {
      background: #0077cc;
      color: #fff;
    }

    .login-button {
      background: #333;
      color: white;
    }

    .logout-button {
      background: #c0392b;
      color: white;
    }

    .my-account-button {
      background: #2c3e50;
      color: white;
    }

    .login-form {
      display: none;
      align-items: center;
      gap: 10px;
      flex-grow: 1;
      max-width: 100%;
    }

    .login-form.visible {
      display: flex;
    }

    .login-form input {
      height: 34px;
      padding: 0 12px;
      border-radius: 20px;
      border: 1px solid #ccc;
      flex: 1;
      font-size: 14px;
    }

    .error-message {
      background: #e74c3c;
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      display: none;
      flex: 1;
      justify-content: space-between;
      align-items: center;
    }

    .error-message.visible {
      display: flex;
    }

    .error-message button {
      background: none;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .floating-bar {
        position: fixed;
        top: 50px;
        border-radius: 0;
        opacity: 1;
        pointer-events: auto;
        transform: translateY(0);
      }

      .content-wrapper {
        flex-wrap: wrap;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="floating-bar" id="authBar">
    <div class="content-wrapper">
      <div class="error-message" id="errorBox">
        <span id="errorText"></span>
        <button onclick="hideError()">&times;</button>
      </div>

      <div id="loginControls">
        <button class="login-button" onclick="showLoginForm()">üë§ Iniciar sesi√≥n</button>
      </div>

      <div class="login-form" id="loginForm">
        <input type="email" id="emailInput" placeholder="Tu correo electr√≥nico" />
        <button class="login-button" onclick="loginUser()">Ingresar</button>
        <button class="login-button" onclick="cancelLogin()">&times;</button>
      </div>

      <a class="subscribe-button" href="https://www.prenoticia.com/p/suscribirme-prenoticia.html" id="subscribeBtn">Suscribite</a>
      <button class="info-button" id="infoBtn">‚Ñπ Informaci√≥n</button>
    </div>
  </div>

  <div class="floating-bar" id="userBar" style="display: none;">
    <div class="content-wrapper">
      <span id="userName"></span>
      <button class="my-account-button">Mi cuenta</button>
      <button class="logout-button" onclick="logoutUser()">Cerrar sesi√≥n</button>
    </div>
  </div>

  <script>
    const users = {
      "mauricioacostacom@gmail.com": {
        nombre: "Mauricio",
        apellido: "Acosta Danaher",
        correo: "mauricioacostacom@gmail.com",
        medio: "Mercado Pago",
        tipo: "Mensual",
        pago: "31 de cada mes",
        proximo: "31 de agosto de 2025",
        concursos: [
          { titulo: "Concurso X", link: "#" },
          { titulo: "Concurso Y", link: "#" }
        ],
        estado: "activo"
      }
    };

    const authBar = document.getElementById("authBar");
    const userBar = document.getElementById("userBar");
    const userName = document.getElementById("userName");

    const loginForm = document.getElementById("loginForm");
    const loginControls = document.getElementById("loginControls");
    const emailInput = document.getElementById("emailInput");

    const errorBox = document.getElementById("errorBox");
    const errorText = document.getElementById("errorText");

    const infoBtn = document.getElementById("infoBtn");
    const subscribeBtn = document.getElementById("subscribeBtn");

    function showLoginForm() {
      loginControls.style.display = "none";
      loginForm.classList.add("visible");
      subscribeBtn.style.display = "none";
      infoBtn.style.display = "none";
      hideError();
      emailInput.focus();
    }

    function cancelLogin() {
      loginControls.style.display = "block";
      loginForm.classList.remove("visible");
      subscribeBtn.style.display = "inline-flex";
      infoBtn.style.display = "inline-flex";
      hideError();
      emailInput.value = "";
    }

    function loginUser() {
      const email = emailInput.value.trim().toLowerCase();
      const user = users[email];

      if (!email) {
        showError("Ingres√° un correo electr√≥nico.");
        return;
      }

      if (!user) {
        showError("Correo electr√≥nico no registrado.");
        return;
      }

      if (user.estado !== "activo") {
        showError("Cuenta suspendida. Contact√° soporte.");
        return;
      }

      localStorage.setItem("logged", "true");
      localStorage.setItem("user", JSON.stringify(user));
      showUser(user);
    }

    function showUser(user) {
      userName.textContent = `Hola, ${user.nombre}`;
      authBar.style.display = "none";
      userBar.style.display = "flex";
    }

    function logoutUser() {
      localStorage.removeItem("logged");
      localStorage.removeItem("user");
      userBar.style.display = "none";
      authBar.style.display = "flex";
      cancelLogin();
    }

    function showError(msg) {
      errorText.textContent = msg;
      errorBox.classList.add("visible");
      loginForm.classList.remove("visible");
      subscribeBtn.style.display = "inline-flex";
      infoBtn.style.display = "inline-flex";
    }

    function hideError() {
      errorBox.classList.remove("visible");
      errorText.textContent = "";
    }

    function checkScroll() {
      if (window.innerWidth <= 768) return;

      if (window.scrollY > 150) {
        authBar.classList.add("visible");
        if (localStorage.getItem("logged") === "true") {
          userBar.classList.add("visible");
        }
      } else {
        authBar.classList.remove("visible");
        userBar.classList.remove("visible");
      }
    }

    function init() {
      const u = JSON.parse(localStorage.getItem("user"));
      if (localStorage.getItem("logged") === "true" && u) {
        showUser(u);
      } else {
        userBar.style.display = "none";
        authBar.style.display = "flex";
      }
      checkScroll();
    }

    window.addEventListener("scroll", checkScroll);
    window.addEventListener("resize", checkScroll);
    window.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
 
